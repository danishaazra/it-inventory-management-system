const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/login-Bot-_6CU.js","assets/firebase-vendor-B2UDLW_X.js","assets/firebase-app-D-fiV83C.js","assets/vendor-BdN5Q6dY.js","assets/firebase-auth-CnPx9bWP.js","assets/firebase-firestore-BFWK-5cG.js","assets/register-jVRsP4Ck.js"])))=>i.map(i=>d[i]);
import{_ as L}from"./qrcode-DEXsfuzH.js";import{J as C}from"./firebase-vendor-B2UDLW_X.js";import{onAuthStateChanged as T}from"./firebase-auth-CnPx9bWP.js";import"./firebase-app-D-fiV83C.js";import"./vendor-BdN5Q6dY.js";import"./firebase-firestore-BFWK-5cG.js";(()=>{const e=(t,a=document)=>a.querySelector(t),y=(t,a=document)=>Array.from(a.querySelectorAll(t)),k=e(".tabs"),f=e("#tab-login"),v=e("#tab-signup"),m=e("#panel-login"),b=e("#panel-signup");e(".tab-indicator");function p(t){const a=t==="signup";[f,v].forEach(i=>i.classList.remove("active")),(a?v:f).classList.add("active"),[m,b].forEach(i=>i.classList.remove("active")),(a?b:m).classList.add("active"),k.classList.toggle("signup",a),f.setAttribute("aria-selected",String(!a)),v.setAttribute("aria-selected",String(a))}f.addEventListener("click",()=>p("login")),v.addEventListener("click",()=>p("signup")),y(".swap a[data-swap]").forEach(t=>t.addEventListener("click",a=>{a.preventDefault(),p(a.currentTarget.getAttribute("data-swap"))})),y(".field.password").forEach(t=>{const a=e("input",t),i=e(".toggle-pass",t);i.addEventListener("click",()=>{const r=a.type==="text";a.type=r?"password":"text",i.setAttribute("aria-label",r?"Show password":"Hide password")})});function n(t,a){const i=t.getAttribute("id"),r=document.getElementById(`${i}-error`);r&&(r.textContent=a||""),t.setAttribute("aria-invalid",a?"true":"false")}function E(t){const a=String(t.value||"").trim(),i=/.+@.+\..+/.test(a);return n(t,i?"":"Enter a valid email address"),i}function w(t,a=1,i="This field is required"){const r=String(t.value||"").trim().length>=a;return n(t,r?"":i),r}m.addEventListener("submit",async t=>{t.preventDefault(),t.stopPropagation(),console.log("Login form submitted");const a=E(e("#login-email")),i=w(e("#login-password"),6,"At least 6 characters");if(console.log("Validation:",{emailOk:a,passOk:i}),a&&i){const r=e("#login-email").value.trim(),h=e("#login-password").value,l=t.target.querySelector(".btn.primary"),d=l?l.textContent:"SIGN IN";console.log("Attempting login for:",r),l&&(l.disabled=!0,l.textContent="SIGNING IN...");try{console.log("Importing login module...");const{login:o}=await L(async()=>{const{login:s}=await import("./login-Bot-_6CU.js");return{login:s}},__vite__mapDeps([0,1,2,3,4,5]));console.log("Login module imported, calling login function..."),await o(r,h),console.log("Login successful, redirect should happen now")}catch(o){console.error("Login error caught:",o),l&&(l.disabled=!1,l.textContent=d),n(e("#login-email"),"");let s="Login failed. Please check your credentials.";o.code==="auth/user-not-found"?s="No account found with this email.":o.code==="auth/wrong-password"?s="Incorrect password. Please try again.":o.code==="auth/invalid-email"?(s="Invalid email address.",n(e("#login-email"),s)):o.code==="auth/too-many-requests"?s="Too many failed attempts. Please try again later.":o.code==="auth/network-request-failed"?s="Network error. Please check your internet connection.":o.message&&(s=o.message),n(e("#login-password"),s)}}else console.log("Form validation failed"),a||console.log("Email validation failed"),i||console.log("Password validation failed")}),b.addEventListener("submit",async t=>{t.preventDefault();const a=w(e("#signup-name"),2,"Enter your full name"),i=E(e("#signup-email")),r=w(e("#signup-password"),8,"At least 8 characters"),h=(()=>{const l=e("#signup-password"),d=e("#signup-confirm"),o=l.value===d.value&&d.value.length>=8;return n(d,o?"":"Passwords must match"),o})();if(a&&i&&r&&h){const l=e("#signup-name").value.trim(),d=e("#signup-email").value.trim(),o=e("#signup-password").value,s=t.target.querySelector(".btn.primary"),S=s?s.textContent:"CREATE ACCOUNT";s&&(s.disabled=!0,s.textContent="CREATING ACCOUNT...");try{const{registerUser:g}=await L(async()=>{const{registerUser:c}=await import("./register-jVRsP4Ck.js");return{registerUser:c}},__vite__mapDeps([6,1,2,3,4,5]));await g(d,o,l);const u=t.target.querySelector(".btn.primary")||s;u&&(u.disabled=!1,u.textContent="CREATE ACCOUNT",u.style.opacity="1",u.style.cursor="pointer"),n(e("#signup-name"),""),n(e("#signup-email"),""),n(e("#signup-password"),""),n(e("#signup-confirm"),""),e("#signup-name").removeAttribute("aria-invalid"),e("#signup-email").removeAttribute("aria-invalid"),e("#signup-password").removeAttribute("aria-invalid"),e("#signup-confirm").removeAttribute("aria-invalid"),t.target.reset(),alert("Your account has been created!"),p("login")}catch(g){const u=t.target.querySelector(".btn.primary")||s;u&&(u.disabled=!1,u.textContent=S);let c="Registration failed. Please try again.";g.code==="auth/email-already-in-use"?(c="This email is already registered. Please sign in instead.",n(e("#signup-email"),c)):g.code==="auth/weak-password"?(c="Password is too weak. Use at least 8 characters.",n(e("#signup-password"),c)):g.code==="auth/invalid-email"?(c="Invalid email address.",n(e("#signup-email"),c)):(g.message&&(c=g.message),n(e("#signup-email"),c))}}}),p("login");const A=m.querySelector(".btn.primary");A&&A.addEventListener("click",t=>{if(!t.target.disabled){const a=new Event("submit",{bubbles:!0,cancelable:!0});m.dispatchEvent(a)}})})();T(C,e=>{e&&console.log("User is already authenticated, but staying on login page")});
