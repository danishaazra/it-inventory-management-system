import"./qrcode-_3APf9r8.js";import{H as d,J as r}from"./firebase-vendor-BDhSju_T.js";import{o as m,s as p}from"./firebase-auth-V8RQ8eEz.js";import"./firebase-app-CdRXrjY0.js";import{getDoc as g,doc as f}from"./firebase-firestore-DyzXcozE.js";import"./vendor-BdN5Q6dY.js";const n=document.getElementById("user-name"),i=document.getElementById("user-avatar");m(r,async e=>{if(e)try{let o=e.email||"User";const l=await g(f(d,"users",e.uid));if(l.exists()){const s=l.data();o=s.fullName||s.name||e.email||"User"}if(n&&(n.textContent=o),i){const s=o.trim().charAt(0).toUpperCase();i.textContent=s||"U"}}catch(o){console.error("Error loading user data for header:",o);const l=e&&(e.displayName||e.email)||"User";if(n&&(n.textContent=l),i){const s=l.trim().charAt(0).toUpperCase();i.textContent=s||"U"}}});const a=document.getElementById("sidebar"),c=document.getElementById("sidebar-toggle-btn"),t=document.getElementById("toggle-icon");if(a&&c&&t){localStorage.getItem("sidebarCollapsed")==="true"?(a.classList.add("collapsed"),t.textContent="→"):t.textContent="☰",c.addEventListener("click",l=>{l.stopPropagation(),l.preventDefault(),a.classList.contains("collapsed"),t.style.opacity="0",t.style.transform="scale(0.8)",setTimeout(()=>{a.classList.toggle("collapsed"),a.classList.contains("collapsed")?t.textContent="→":t.textContent="☰",setTimeout(()=>{t.style.opacity="1",t.style.transform="scale(1)"},50);const s=document.querySelector(".app-shell");s&&(a.classList.contains("collapsed")?s.classList.add("has-collapsed-sidebar"):s.classList.remove("has-collapsed-sidebar")),localStorage.setItem("sidebarCollapsed",a.classList.contains("collapsed")?"true":"false"),console.log("Sidebar toggled, collapsed:",a.classList.contains("collapsed"))},150)}),t.style.opacity="1",t.style.transform="scale(1)";const o=document.querySelector(".app-shell");o&&a.classList.contains("collapsed")&&o.classList.add("has-collapsed-sidebar"),console.log("Sidebar toggle initialized")}else console.error("Sidebar elements not found");savedState;c&&c.addEventListener("click",()=>{a.classList.contains("collapsed")});document.getElementById("logout-btn").addEventListener("click",async()=>{try{await p(r),window.location.href="index.html"}catch(e){console.error("Logout error:",e),alert("Error logging out. Please try again.")}});
